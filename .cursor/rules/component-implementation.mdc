---
description: Rules for implementing components from Figma designs
globs:
  - src/components/**/*.tsx
  - src/components/**/*.scss
---

# Component Implementation

## Sources

| Source | Purpose |
|--------|---------|
| Figma MCP | CSS (`get_design_context`) |
| Base UI docs | API, accessibility |
| `_variables.scss` | Tokens |
| `_text-styles.scss` | Typography mixins |
| `_effects.scss` | Shadows |
| `_mixins.scss` | Utility mixins |

## Rules

1. Fetch Figma MCP before writing CSS
2. Zero hardcoded values — use tokens or mixins
3. Use `clsx` for className merging
4. Use `forwardRef` on all components
5. Use `render` prop for composition
6. **Use slots for nested elements** — any nested component (icons, indicators, trailing actions, decorative elements) should be a `React.ReactNode` prop with sensible defaults when applicable
7. Include Storybook story
8. Include Playwright tests
9. **No verbose comments** — code is self-documenting

## Code Style

- No decorative comment dividers
- No verbose headers or token lists
- No emojis in code or console output
- Code is self-documenting

## Hover States

Use `surface-with-hover` mixin for surfaces that need hover overlay (preserves base color):

```scss
@use '../tokens/mixins' as *;

.card {
  @include surface-with-hover(var(--surface-secondary));
}
```

This layers `--surface-hover` on top of the base color instead of replacing it.

## File Structure

```
src/components/{Name}/
├── parts.tsx
├── {Name}.module.scss
├── {Name}.test.tsx
├── {Name}.stories.tsx
└── index.ts
```

## Checklist

- [ ] Figma MCP called
- [ ] All values tokenized
- [ ] forwardRef + clsx
- [ ] Slots for nested elements (icons, trailing actions, etc.)
- [ ] Reduced motion handled
- [ ] Tests pass
- [ ] No decorative comments
