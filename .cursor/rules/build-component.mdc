---
description: Build component from Figma with parallel research
globs: []
alwaysApply: false
---

# Build Component from Figma

## Step 1: Parse Figma URL

Extract `fileKey` and `nodeId`.

## Step 2: Parallel Research

Launch **3 subagents simultaneously** (Task tool, `explore` type, `fast` model):

| Agent | Task | Thoroughness |
|-------|------|--------------|
| Figma | Metadata, variable defs, CSS per variant | very thorough |
| Base UI | Fetch llms.txt, find matches/compositions | medium |
| Codebase | Find similar components, patterns to follow | quick |

**Figma agent prompt:**
> Analyze Figma component at fileKey={fileKey}, nodeId={nodeId}. Use MCP tools: metadata, variable defs, design context CSS for each variant/state. Output: variants, sizes, tokens, sub-components, states, key CSS.

**Base UI agent prompt:**
> Research Base UI for {component}. Fetch https://base-ui.com/llms.txt, check compositions. Output: exact match, composition option, recommendation (A/B/C).

**Codebase agent prompt:**
> Find patterns in src/components/ for implementing {component}. Output: similar components, file structure, token patterns.

## Step 3: Synthesize & Decide

Combine agent outputs → choose Path A/B/C.

## Step 4: Implement

Follow existing rules based on path:
- **Path A/B** (Base UI): `components.mdc`
- **Path C** (Custom): `custom-components.mdc`
- **Figma details**: `figma-analysis.mdc`

## Step 5: Code Review (after tests pass)

Launch **1 subagent** (Task tool, `explore` type, `fast` model):

> Review {Component} for simplicity. Check: (1) No custom data attributes for Base UI states, (2) No unnecessary props/logic, (3) Tokens match Figma exactly, (4) Patterns match existing components. Flag anything that could be simpler.

Address feedback, then run `npm run lint && npm run build`.

## Flow

```
Figma URL → 3 parallel agents → Synthesize → A/B/C → Implement → Tests → Code Review → Ship
```
